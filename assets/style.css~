/**
 * Project: Texyla Rewrite Dream Team
 * File: /texyla-rewrite/assets/style.css
 * Description: Styly pro Texyla editor - moderní, responzivní design
 * 
 * @author Dream Team (Petr & Bó)
 * @license MIT
 * @version 1.0.0
 */

/* === ZÁKLADNÍ KOMPONENTA === */

/**
 * Hlavní wrapper pro celý editor
 * Používá block layout pro správné zobrazení textarey a náhledu
 */
.texyla {
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
}

/* === TOOLBAR === */

/**
 * Panel s tlačítky pro formátování textu
 */
.texyla__toolbar {
    margin-bottom: 0.75rem;
    background-color: #f8fafc;
    padding: 0.75rem;
    border-radius: 0.5rem;
    border: 2px solid #e2e8f0;
    display: flex;
    flex-wrap: wrap;
    gap: 0.375rem;
    align-items: center;
}

/**
 * Základní styl pro všechna tlačítka v toolbaru
 */
.texyla__button {
    background-color: #ffffff;
    border: 2px solid #cbd5e0;
    padding: 0.5rem 0.75rem;
    cursor: pointer;
    border-radius: 0.375rem;
    font-size: 1rem;
    min-width: 2.75rem;
    height: 2.75rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: all 150ms ease-in-out;
    user-select: none;
}

/**
 * Hover stav tlačítek
 */
.texyla__button:hover {
    background-color: #edf2f7;
    border-color: #a0aec0;
    transform: translateY(-1px);
}

/**
 * Aktivní stav tlačítka (např. při stisknutí)
 */
.texyla__button:active {
    transform: translateY(0);
    background-color: #e2e8f0;
}

/**
 * Speciální tlačítko pro přepínání náhledu
 */
.texyla__button--preview {
    margin-left: auto;
    background-color: #4299e1;
    color: #ffffff;
    border-color: #3182ce;
    font-weight: 500;
}

.texyla__button--preview:hover {
    background-color: #3182ce;
    border-color: #2c5282;
}

/**
 * Aktivní stav tlačítka náhledu (když je náhled zapnutý)
 */
.texyla__button--active {
    background-color: #38a169 !important;
    border-color: #2f855a !important;
}

/* === OBSAH EDITORU (TEXTAREA + NÁHLED) === */

/**
 * Container pro textareu a náhledový panel
 * Zajišťuje, že jsou oba elementy na stejném místě v layoutu
 */
.texyla__content {
    position: relative;
}

/**
 * Společné styly pro textareu a náhledový panel
 * Oba mají stejné rozměry a pozici pro plynulé přepínání
 */
.texyla textarea,
.texyla__preview {
    width: 100%;
    min-height: 250px;
    padding: 1rem;
    box-sizing: border-box;
    border: 2px solid #e2e8f0;
    border-radius: 0.5rem;
    font-size: 1rem;
    line-height: 1.6;
    resize: vertical;
    transition: border-color 200ms ease;
    display: block;
}

/**
 * Textarea - základní editor
 */
.texyla textarea {
    background-color: #ffffff;
    color: #2d3748;
    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', monospace;
}

/**
 * Focus stav textarey
 */
.texyla textarea:focus {
    outline: none;
    border-color: #4299e1;
    box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.15);
}

/**
 * Placeholder textarey
 */
.texyla textarea::placeholder {
    color: #a0aec0;
    opacity: 1;
}

/* === NÁHLEDOVÝ PANEL === */

/**
 * Panel pro zobrazení HTML náhledu
 * Je skrytý defaultně, zobrazuje se místo textarey
 */
.texyla__preview {
    background-color: #f8fafc;
    overflow-y: auto;
    display: none; /* Výchozí stav - skrytý */
    border-color: #90cdf4; /* Odlišení od textarey */
}

/**
 * Loading stav náhledu (při načítání z AJAX)
 */
.texyla__preview--loading {
    position: relative;
    min-height: 120px;
    opacity: 0.7;
}

/**
 * Animované pozadí pro loading stav
 */
.texyla__preview--loading::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 40px;
    height: 40px;
    border: 3px solid #e2e8f0;
    border-top-color: #4299e1;
    border-radius: 50%;
    animation: texyla-spin 1s linear infinite;
}

/**
 * Animace rotace pro loading spinner
 */
@keyframes texyla-spin {
    to {
        transform: translate(-50%, -50%) rotate(360deg);
    }
}

/**
 * Prázdný náhled (když není žádný text)
 */
.texyla-empty-preview {
    color: #a0aec0;
    font-style: italic;
    text-align: center;
    padding: 2rem;
    margin: 0;
}

/* === CHYBOVÉ STAVY === */

/**
 * Kontejner pro chybové hlášky
 */
.texyla__error {
    background-color: #fed7d7;
    border-left: 4px solid #fc8181;
    padding: 1rem;
    color: #742a2a;
    border-radius: 0.375rem;
    margin: 0;
}

.texyla__error p {
    margin: 0 0 0.5rem 0;
    font-weight: 600;
}

.texyla__error small {
    font-size: 0.875rem;
    opacity: 0.8;
}

/* === STYLY PRO TEXT UVNITŘ NÁHLEDU === */

/**
 * Nadpisy v náhledu
 */
.texyla__preview h1,
.texyla__preview h2,
.texyla__preview h3,
.texyla__preview h4,
.texyla__preview h5,
.texyla__preview h6 {
    margin-top: 1.5em;
    margin-bottom: 0.5em;
    color: #2d3748;
    font-weight: 600;
    line-height: 1.3;
}

.texyla__preview h1 { font-size: 2em; }
.texyla__preview h2 { font-size: 1.5em; }
.texyla__preview h3 { font-size: 1.25em; }
.texyla__preview h4 { font-size: 1.125em; }
.texyla__preview h5 { font-size: 1em; }
.texyla__preview h6 { font-size: 0.875em; }

/**
 * Odstavce
 */
.texyla__preview p {
    margin-bottom: 1em;
    line-height: 1.7;
}

/**
 * Tučný text
 */
.texyla__preview strong {
    font-weight: 700;
    color: #2d3748;
}

/**
 * Kurzíva
 */
.texyla__preview em {
    font-style: italic;
}

/**
 * Citace
 */
.texyla__preview blockquote {
    border-left: 4px solid #cbd5e0;
    padding-left: 1rem;
    margin-left: 0;
    margin-right: 0;
    color: #4a5568;
    font-style: italic;
}

/**
 * Bloky kódu
 */
.texyla__preview pre {
    background-color: #2d3748;
    color: #e2e8f0;
    padding: 1rem;
    border-radius: 0.375rem;
    overflow-x: auto;
    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', monospace;
    font-size: 0.875em;
    line-height: 1.5;
    margin: 1em 0;
}

/**
 * Inline kód
 */
.texyla__preview code {
    background-color: #edf2f7;
    color: #2d3748;
    padding: 0.125rem 0.375rem;
    border-radius: 0.1875rem;
    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', monospace;
    font-size: 0.875em;
}

/**
 * Seznamy
 */
.texyla__preview ul,
.texyla__preview ol {
    padding-left: 1.5rem;
    margin-bottom: 1em;
}

.texyla__preview li {
    margin-bottom: 0.375rem;
    line-height: 1.6;
}

/**
 * Odkazy
 */
.texyla__preview a {
    color: #3182ce;
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color 150ms ease;
}

.texyla__preview a:hover {
    border-bottom-color: #3182ce;
}

/**
 * Obrázky
 */
.texyla__preview img {
    max-width: 100%;
    height: auto;
    border-radius: 0.375rem;
    border: 1px solid #e2e8f0;
}

/* === RESPONZIVITA === */

/**
 * Mobile first design - úpravy pro menší obrazovky
 */
@media (max-width: 768px) {
    .texyla__toolbar {
        padding: 0.5rem;
        gap: 0.25rem;
    }
    
    .texyla__button {
        min-width: 2.5rem;
        height: 2.5rem;
        padding: 0.375rem 0.5rem;
        font-size: 0.9375rem;
    }
    
    .texyla textarea,
    .texyla__preview {
        min-height: 200px;
        padding: 0.75rem;
        font-size: 0.9375rem;
    }
    
    .texyla__preview h1 { font-size: 1.75em; }
    .texyla__preview h2 { font-size: 1.375em; }
    .texyla__preview h3 { font-size: 1.125em; }
}

/**
 * Úpravy pro velmi malé obrazovky
 */
@media (max-width: 480px) {
    .texyla__button {
        min-width: 2.25rem;
        height: 2.25rem;
        padding: 0.25rem 0.375rem;
        font-size: 0.875rem;
    }
    
    .texyla__button--preview {
        font-size: 0.75rem;
        padding: 0.25rem;
    }
}

/* === PŘÍSTUPNOST === */

/**
 * Zvýraznění fokusu pro klávesnicovou navigaci
 */
.texyla__button:focus-visible {
    outline: 2px solid #4299e1;
    outline-offset: 2px;
}

/**
 * Zvýšení kontrastu pro slabozraké uživatele
 */
@media (prefers-contrast: high) {
    .texyla__button {
        border-width: 3px;
    }
    
    .texyla textarea,
    .texyla__preview {
        border-width: 3px;
    }
}

/**
 * Redukce motion pro uživatele, kteří preferují méně animací
 */
@media (prefers-reduced-motion: reduce) {
    .texyla__button {
        transition: none;
    }
    
    .texyla__preview--loading::after {
        animation: none;
        border-top-color: transparent;
    }
}

/* === TEXYLA TLAČÍTKA S CSS TŘÍDAMI === */

/* TUČNÉ - musí mít font-weight */
.texyla-bold {
    font-family: "Arial", "Helvetica", sans-serif;
    font-weight: 900 !important;
}

/* KURZÍVA - musí mít font-style */
.texyla-italic {
    font-family: "Arial", "Helvetica", sans-serif;
    font-style: italic !important;
    font-weight: 700;
}

/* PODTRŽENÉ */
.texyla-underline {
    font-family: "Arial", "Helvetica", sans-serif;
    text-decoration: underline !important;
    text-decoration-thickness: 2px;
}

/* PŘEŠKRTNUTÉ */
.texyla-strike {
    font-family: "Arial", "Helvetica", sans-serif;
    text-decoration: line-through !important;
    text-decoration-thickness: 2px;
}

/* KÓD */
.texyla-code {
    font-family: "Consolas", "Monaco", "Courier New", monospace;
    font-weight: bold;
    color: #007acc;
}

/* NADPIS */
.texyla-heading {
    font-family: "Arial", "Helvetica", sans-serif;
    font-weight: 800;
    font-size: 0.95em;
    color: #2c3e50;
}

/* JEMNÝ HOVER - BEZ POHYBU, PŘEPSAT PŮVODNÍ */
.texyla__button:hover {
    background-color: #f8f9fa !important;
    border-color: #a0aec0 !important;
    transform: none !important; /* DŮLEŽITÉ: vypnout pohyb */
    transition: background-color 0.15s ease !important;
}